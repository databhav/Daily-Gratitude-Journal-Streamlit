name: Daily Email Reminder

# This defines the schedule for the job. 
on:
  schedule:
    # CRON Syntax: Runs at minute 0, hour 12 (12:00 PM UTC), every day.
    - cron: '0 12 * * *' 
  # Allows manual triggering for testing
  workflow_dispatch: 

jobs:
  run_reminder_script:
    runs-on: ubuntu-latest
    steps:
      # ... (Steps for checking out code and installing Python dependencies) ...
      
      - name: Run Reminder Script
        # This is where the secrets are loaded into environment variables (env)
        env:
          SUPABASE_URL: ${{ secrets.SUPABASE_URL }}
          SUPABASE_KEY: ${{ secrets.SUPABASE_KEY }}
          MAILJET_PUBLIC_KEY: ${{ secrets.MAILJET_PUBLIC_KEY }} 
          MAILJET_SECRET_KEY: ${{ secrets.MAILJET_SECRET_KEY }}
          SENDER_EMAIL: ${{ secrets.SENDER_EMAIL }} 
          
        run: |
          python send_reminders.py # Executes the script
